# 室墨司源控制面板

这是一个基于 **Python + Streamlit** 的植物工厂控制与监控系统，集传感器数据可视化、PLC/485设备控制以及AI光周期配置于一体。用户可以通过网页界面实时查看环境数据、控制LED、水泵、洒水等设备，并自动生成光周期配置。

---

## 功能概览

### 1. 数据可视化
- 可查看温度、湿度、CO2、pH、EC 等环境参数的趋势图。
- 支持最近 1、3、7 天的数据展示。
- 支持查看不同摄像头拍摄的最新图片。

### 2. 设备控制
- **PLC设备**：UV灯、水泵、洒水系统、LED 灯等。
- **RS485设备**：多组LED灯控制。
- 支持手动与自动模式：
  - **手动模式**：自由设置开关时间。
  - **自动模式**：根据每日光周期自动开启/关闭。

### 3. AI光周期配置
- 根据栽培天数及光周期参数（最小、最大、平均光照时长）自动生成每日光周期计划。
- 自动生成配置文件，供LED控制模块使用。

---

## 项目结构

├─ config/ # AI光周期与LED每日配置
├─ Image/ # 摄像头图片目录
├─ Log/ # 传感器数据CSV日志
├─ configPLC.json # PLC设备配置文件
├─ config485.json # RS485设备配置文件
├─ light_agent.py # 光周期计算模块
└─ visual_control.py # 主应用入口

## 注意事项
文件夹里保存的是截止到11.12的传感器数据
如果未更新同步到当天的传感器数据，app传感器页面会显示“未找到对应数据”

如果在未更新同步的情况下仍想预览传感器显示界面（比如说预览11.12当天的显示界面的话）

把`load_recent_data`里的`today = date.today()`改成`today = date(2025, 11, 12)`
`return df_all[df_all.index >= datetime.now() - timedelta(days=days)]`改成`return df_all`就行了
